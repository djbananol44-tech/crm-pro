# üßπ JGGL CRM ‚Äî Cleanup Report

**–î–∞—Ç–∞:** 2026-01-21
**–í–µ—Ç–∫–∞:** chore/repo-cleanup

---

## üìã –®–∞–≥ 1: –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è

### –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|-----------|----------|---------|
| Docker | 3 docker-compose —Ñ–∞–π–ª–∞ (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ) | –£–¥–∞–ª—ë–Ω `docker-compose.local.yml` |
| –°–∫—Ä–∏–ø—Ç—ã | 2 install —Å–∫—Ä–∏–ø—Ç–∞ (—Ä–∞–∑–Ω–∞—è –ª–æ–≥–∏–∫–∞) | `install-prod.sh` ‚Üí `docs/legacy/` |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | Hardcoded –ø–∞—Ä–æ–ª–∏ `CrmSecurePass2024` | –ó–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è |
| .gitignore | –ù–µ–ø–æ–ª–Ω—ã–π (exports, logs –Ω–µ –∏—Å–∫–ª—é—á–µ–Ω—ã) | –û–±–Ω–æ–≤–ª—ë–Ω —Å –Ω–æ–≤—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ |
| –ö–∞—á–µ—Å—Ç–≤–æ | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `.editorconfig` | –î–æ–±–∞–≤–ª–µ–Ω |
| –°—Ç–∏–ª—å | –ù–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ pint | –î–æ–±–∞–≤–ª–µ–Ω `pint.json` |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | –†–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω–∞—è | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ `docs/` |
| –¢–µ—Å—Ç—ã | –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ assertions | –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–¥ –Ω–æ–≤—É—é –ª–æ–≥–∏–∫—É |

---

## üóëÔ∏è –®–∞–≥ 2: –£–¥–∞–ª—ë–Ω–Ω—ã–µ/–ø–µ—Ä–µ–º–µ—â—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –£–¥–∞–ª–µ–Ω–æ

| –§–∞–π–ª | –ü—Ä–∏—á–∏–Ω–∞ |
|------|---------|
| `docker-compose.local.yml` | –î—É–±–ª–∏—Ä—É–µ—Ç `docker-compose.yml`, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –¥—Ä—É–≥–æ–π –æ–±—Ä–∞–∑ |

### –ü–µ—Ä–µ–º–µ—â–µ–Ω–æ

| –ò–∑ | –í | –ü—Ä–∏—á–∏–Ω–∞ |
|----|---|---------|
| `install-prod.sh` | `docs/legacy/install-prod.sh` | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Traefik (–Ω–µ –≤ —Ç–µ–∫—É—â–µ–º —Å—Ç–µ–∫–µ), —Å–æ—Ö—Ä–∞–Ω—ë–Ω –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏ |

---

## üîí –®–∞–≥ 3: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

| –§–∞–π–ª | –ë—ã–ª–æ | –°—Ç–∞–ª–æ |
|------|------|-------|
| `docker-compose.yml` | `DB_PASSWORD: CrmSecurePass2024` | `DB_PASSWORD: ${DB_PASSWORD:?...}` |
| `docker/env.example` | `DB_PASSWORD=CrmSecurePass2024` | `DB_PASSWORD=CHANGE_ME_GENERATE_SECURE_PASSWORD` + –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è |

### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π .gitignore

–î–æ–±–∞–≤–ª–µ–Ω–æ:
```
storage/app/exports/
storage/app/backups/
storage/logs/*.log
.env.*
!.env.example
```

---

## üì¶ –®–∞–≥ 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### Composer

- ‚úÖ `composer validate` ‚Äî OK
- ‚úÖ `optimize-autoloader: true` —É–∂–µ –±—ã–ª –≤–∫–ª—é—á—ë–Ω
- ‚úÖ –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –Ω–µ—Ç

### NPM

- ‚úÖ `npm run build` ‚Äî OK (4.97s)
- ‚úÖ –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–µ—Ç

### Laravel

–ö–æ–º–∞–Ω–¥—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è production:
```bash
php artisan config:cache
php artisan route:cache
php artisan view:cache
```

---

## üìù –®–∞–≥ 5: –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `.editorconfig` | –ï–¥–∏–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ (indent, charset, eol) |
| `pint.json` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PHP code style (Laravel preset) |

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∏–ª—è

- ‚úÖ `./vendor/bin/pint` –∏—Å–ø—Ä–∞–≤–∏–ª 52 —Ñ–∞–π–ª–∞
- ‚úÖ `./vendor/bin/pint --test` ‚Äî –ø—Ä–æ—Ö–æ–¥–∏—Ç

---

## üìö –®–∞–≥ 6: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ docs/

```
docs/
‚îú‚îÄ‚îÄ architecture.md    # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
‚îú‚îÄ‚îÄ changelog.md       # –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îú‚îÄ‚îÄ runbook.md         # –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
‚îú‚îÄ‚îÄ search.md          # –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ (–±—ã–ª)
‚îî‚îÄ‚îÄ legacy/
    ‚îî‚îÄ‚îÄ install-prod.sh  # –£—Å—Ç–∞—Ä–µ–≤—à–∏–π —Å–∫—Ä–∏–ø—Ç
```

### –û–±–Ω–æ–≤–ª—ë–Ω README.md

- –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "Development" —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "Code Style"
- –û–±–Ω–æ–≤–ª—ë–Ω —Ä–∞–∑–¥–µ–ª "SSL Setup" (—É–±—Ä–∞–Ω Traefik)
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `docs/`

---

## ‚úÖ Acceptance Criteria

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –°—Ç–∞—Ç—É—Å | –ö–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ |
|----------|--------|------------------|
| `npm run build` | ‚úÖ PASS | `npm run build` |
| `php artisan test` | ‚úÖ PASS | `docker exec crm_app php artisan test` |
| `pint --test` | ‚úÖ PASS | `docker exec crm_app ./vendor/bin/pint --test` |
| `docker compose up` | ‚úÖ PASS | `docker compose up -d` |
| –ù–µ—Ç —Å–µ–∫—Ä–µ—Ç–æ–≤ | ‚úÖ PASS | –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤—Ä—É—á–Ω—É—é |
| –ù–µ—Ç –ª–æ–≥–æ–≤/–∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ | ‚úÖ PASS | `.gitignore` –æ–±–Ω–æ–≤–ª—ë–Ω |

---

## üìä –ò—Ç–æ–≥–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ |
|---------|-----|-------|
| –§–∞–π–ª—ã docker-compose | 3 | 2 |
| –°–∫—Ä–∏–ø—Ç—ã install | 2 | 1 (+1 –≤ legacy) |
| Hardcoded –ø–∞—Ä–æ–ª–∏ | 5 | 0 |
| –ü—Ä–∞–≤–∏–ª–∞ .gitignore | ~20 | 30+ |
| –§–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ | 2 | 5 |
| –¢–µ—Å—Ç—ã (–≤—Å–µ–≥–æ) | 74 | 76 (+2 –¥–ª—è buildConversationLink) |

---

## üîÑ –û—Ç–∫–∞—Ç

–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç–∫–∞—Ç–∞:

```bash
# –û—Ç–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç
git revert HEAD

# –ò–ª–∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ main
git checkout main
git branch -D chore/repo-cleanup
```

---

---

## üõ†Ô∏è Developer Experience (DX)

### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

| –§–∞–π–ª | –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----------|----------|
| `Makefile` | Linux/macOS | `make up`, `make test`, `make lint` –∏ —Ç.–¥. |
| `scripts/dev.ps1` | Windows | `.\scripts\dev.ps1 up`, `.\scripts\dev.ps1 test` |
| `scripts/dev.sh` | Linux/macOS | `./scripts/dev.sh up`, `./scripts/dev.sh test` |

### Quick Start –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤ (3 –∫–æ–º–∞–Ω–¥—ã)

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å
git clone ... && cd crm-pro

# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env
cp docker/env.example .env && nano .env

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
make install  # –∏–ª–∏ .\scripts\dev.ps1 install –Ω–∞ Windows
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `make up` | –ü–æ–¥–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã |
| `make test` | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã |
| `make lint` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å code style |
| `make reset` | –ë—ã—Å—Ç—Ä—ã–π reset (cache + migrate + seed) |
| `make check` | lint + test (CI) |

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **PHPUnit warnings** ‚Äî —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `@test` –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–æ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ PHPUnit 12. –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –∏—Å–ø—Ä–∞–≤–∏—Ç—Å—è –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ PHPUnit 12.

2. **Traefik** ‚Äî —É–¥–∞–ª—ë–Ω –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –Ω–æ `docs/legacy/install-prod.sh` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–∞—Ä—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å Traefik –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏.

3. **Filament assets** ‚Äî `public/css/filament/` –∏ `public/js/filament/` –æ—Å—Ç–∞—é—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (–ø—É–±–ª–∏–∫—É—é—Ç—Å—è —á–µ—Ä–µ–∑ vendor:publish).

4. **Makefile –Ω–∞ Windows** ‚Äî —Ç—Ä–µ–±—É–µ—Ç WSL –∏–ª–∏ Make for Windows. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.\scripts\dev.ps1` –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É.
